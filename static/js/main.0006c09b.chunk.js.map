{"version":3,"sources":["components/style.module.css","components/SearchBar.jsx","components/Button.jsx","components/ImageGallery.jsx","components/ImageGalleryItem.jsx","components/Modal.jsx","components/request.js","App.js","index.js"],"names":["module","exports","SearchBar","handleSubmit","useState","text","setText","placeholder","setPlaceholder","onSubmit","event","preventDefault","trim","className","style","searchCont","input","type","value","onChange","target","iconCont","onClick","icon","Button","handleLoadMore","buttonCont","ImageGallery","dataArray","setDataArray","status","setStatus","showModal","setShowModal","hight","useRef","lastRequest","currentPage","modalUrl","hightCalc","current","document","querySelector","clientHeight","useCallback","request","then","res","data","hits","length","toast","warn","catch","prevState","window","scrollTo","top","behavior","err","console","log","gettingLink","e","modalId","id","obj","find","el","toString","largeImageURL","error","spinContainer","color","height","width","Modal","closeModal","src","modalImg","alt","gallery","ImageGalleryItem","openModalData","map","photoCard","photoImg","webformatURL","children","modalRoot","handleKeyDown","code","useEffect","addEventListener","removeEventListener","createPortal","overlay","ev","currentTarget","modalContainer","closeButton","page","searchRequest","url","axios","get","App","state","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"uIACAA,EAAOC,QAAU,CAAC,WAAa,0BAA0B,WAAa,0BAA0B,MAAQ,qBAAqB,SAAW,wBAAwB,KAAO,oBAAoB,QAAU,uBAAuB,UAAY,yBAAyB,SAAW,wBAAwB,QAAU,uBAAuB,YAAc,2BAA2B,eAAiB,8BAA8B,SAAW,wBAAwB,cAAgB,+B,mMCMzc,SAASC,EAAT,GAAoC,IAAfC,EAAc,EAAdA,aAExB,EAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAoCF,mBAAS,mBAA7C,mBAAOG,EAAP,KAAoBC,EAApB,KAMEC,EAAS,SAACC,GACAA,EAAMC,iBACc,KAAhBN,EAAKO,QACTT,EAAaE,EAAKO,QACdJ,EAAeH,GACfC,EAAQ,KAERE,EAAe,oBAI/B,OAAM,mCACF,qBAAKK,UAAWC,IAAMC,WAAtB,SACI,uBAAMN,SAAUA,EAAhB,UAGI,uBAEAI,UAAWC,IAAME,MACjBC,KAAK,OACLC,MAAOb,EACPE,YAAaA,EACbY,SA1BQ,SAACT,GACdJ,EAAQI,EAAMU,OAAOF,UA2BhB,qBAAKL,UAAWC,IAAMO,SAClBC,QAASb,EADb,SAEI,cAAC,IAAD,CAAaI,UAAWC,IAAMS,gBCvC3C,SAASC,EAAT,GAAmC,IAAlBC,EAAiB,EAAjBA,eACpB,OAAM,mCACF,qBAAKZ,UAAWC,IAAMY,WAAtB,SACI,wBACIb,UAAWC,IAAME,MACjBC,KAAK,SACLK,QAASG,EAHb,2B,kDCIL,SAASE,IAAgB,IAAD,OAE7B,EAAkCvB,mBAAS,IAA3C,mBAAOwB,EAAP,KAAkBC,EAAlB,KACA,EAA4BzB,mBAAS,QAArC,mBAAO0B,EAAP,KAAeC,EAAf,KACA,EAAkC3B,oBAAS,GAA3C,mBAAO4B,EAAP,KAAkBC,EAAlB,KAEIC,EAAQC,iBAAO,GACfC,EAAcD,iBAAO,IACrBE,EAAcF,iBAAO,GACrBG,EAAWH,iBAAO,IAEhBI,EAAU,WAAQL,EAAMM,QAAUC,SAASC,cAAc,QAAQC,cAEjExC,EAAayC,uBAAY,SAACvC,GACV,KAAhB+B,IACJG,IACAF,EAAYG,QAAQ,EACpBJ,EAAYI,QAAUnC,EACtB0B,EAAU,WAEVc,EAAQR,EAAYG,QAASJ,EAAYI,SACtCM,MAAK,SAACC,GACDA,EAAIC,KAAKC,KAAKC,OAAS,GACzBC,IAAMC,KAAK,wCACXrB,EAAU,UAGVF,EAAakB,EAAIC,KAAKC,MACtBlB,EAAU,gBAGbsB,OAAM,kBAAM,EAAKtB,UAAU,gBAC9B,IAIIN,EAAemB,uBAAY,WACX,KAAhBR,IACJG,IACAR,EAAU,WACTM,EAAYG,QAAQH,EAAYG,QAAQ,EACzCK,EAAQR,EAAYG,QAASJ,EAAYI,SACtCM,MAAK,SAACC,GACDA,EAAIC,KAAKC,KAAKC,OAAS,GACzBC,IAAMC,KAAK,2CACXrB,EAAU,UAEVF,GAAa,SAACyB,GAAD,4BACPA,GADO,YACOP,EAAIC,KAAKC,UAE7BlB,EAAU,YAEVwB,OAAOC,SAAS,CACdC,IAAKvB,EAAMM,QAAU,GACrBkB,SAAU,eAIfL,OAAM,SAACM,GACN5B,EAAU,UACV6B,QAAQC,IAAIF,SAEhB,IAaIG,EAAc,SAACC,GACnB,IAAMC,EAAUD,EAAE3C,OAAO6C,GACnBC,EAAMtC,EAAUuC,MAAK,SAACC,GAAD,OAAQA,EAAGH,GAAGI,aAAeL,KACxD,GAAIE,EAAO,OAAOA,EAAII,eAIxB,OAAO,qCAEO,WAAXxC,GAAuBqB,IAAMoB,MAAM,mCAExB,YAAXzC,GACC,qBAAKjB,UAAWC,IAAM0D,cAAtB,SACE,cAAC,IAAD,CAAQvD,KAAK,UAAUwD,MAAM,UAAUC,OAAQ,IAAKC,MAAO,QAI9D3C,GACC,cAAC4C,EAAD,CACEC,WA9Ba,WACjB5C,GAAa,GACbF,EAAU,aA2BR,SAEE,qBAAK+C,IAAKxC,EAASE,QAAS3B,UAAWC,IAAMiE,SAAUC,IAAI,OAG/D,cAAC9E,EAAD,CAAWC,aAAcA,IAEzB,oBAAKU,UAAWC,IAAMmE,QAAtB,SACE,cAACC,EAAD,CACAtD,UAAWA,EACXuD,cAlCkB,SAACpB,GACrB9B,GAAa,GACbK,EAASE,QAAUsB,EAAYC,GAC/BhC,EAAU,aAmCI,aAAXD,GACE,cAACN,EAAD,CACDC,eAAgBA,OCpHhB,SAASyD,EAAT,GAAyD,IAA7BtD,EAA4B,EAA5BA,UAAWuD,EAAiB,EAAjBA,cAE9C,OAAOvD,EAAUwD,KAAI,SAAAhB,GAAE,OAEpB,oBAAIvD,UAAWC,IAAMuE,UAAuBpB,GAAIG,EAAGH,GAAnD,SACC,qBACE3C,QAAS,SAACyC,GAAD,OAAOoB,EAAcpB,IAC9BlD,UAAWC,IAAMwE,SACjBR,IAAKV,EAAGmB,aAAcP,IAAI,GAC1Bf,GAAIG,EAAGH,MAL2BG,EAAGH,OCArC,SAASW,EAAT,GAAwC,IAAvBC,EAAsB,EAAtBA,WAAWW,EAAW,EAAXA,SAEzBC,EAAYtD,iBAAOM,SAASC,cAAc,gBAE1CgD,EAAgB,SAAC3B,GACJ,WAAXA,EAAE4B,MAAqBd,KAI/Be,qBAAU,WAEN,OADArC,OAAOsC,iBAAiB,UAAWH,GAC3B,kBAAOnC,OAAOuC,oBAAoB,UAAWJ,OAWzD,OAAOK,uBACH,sBACIlF,UAAWC,IAAMkF,QACjB1E,QAVoB,SAAC2E,GACrBA,EAAG7E,SAAW6E,EAAGC,eACjBrB,KAMJ,UAII,qBAAKhE,UAAWC,IAAMqF,eAAtB,SACKX,IAEL,wBAAQvE,KAAK,SAASK,QAASuD,EAAYhE,UAAWC,IAAMsF,YAA5D,sBAEJX,EAAUjD,S,qBClCX,SAASK,EAAQwD,EAAMC,GAC5B,IAAMC,EAAG,UAJM,2BAIN,gBAHC,qCAGD,6BAA8CF,EAA9C,cAAwDC,GACjE,OAAOE,IAAMC,IAAIF,G,UCFbG,E,4MACJC,MAAQ,G,4CAER,WACE,OACE,qCACE,cAAChF,EAAD,IACA,cAAC,IAAD,W,GAPUiF,aAaHF,ICbfG,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtE,SAASuE,eAAe,W","file":"static/js/main.0006c09b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchCont\":\"style_searchCont__1AzEo\",\"buttonCont\":\"style_buttonCont__ZF5Dc\",\"input\":\"style_input__39U-9\",\"iconCont\":\"style_iconCont__3_G87\",\"icon\":\"style_icon__2rB5x\",\"gallery\":\"style_gallery__sUMci\",\"photoCard\":\"style_photoCard__2nIXB\",\"photoImg\":\"style_photoImg__2m7qZ\",\"overlay\":\"style_overlay__2gacz\",\"closeButton\":\"style_closeButton__C-xQG\",\"modalContainer\":\"style_modalContainer__2Ksxi\",\"modalImg\":\"style_modalImg__1vs8z\",\"spinContainer\":\"style_spinContainer__exWmd\"};","\r\nimport { useState } from \"react\";\r\nimport style from \"./style.module.css\";\r\nimport { BiSearchAlt } from \"react-icons/bi\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\nexport function SearchBar ({handleSubmit}){\r\n\r\n    const [text, setText] = useState(\"\");\r\n    const [placeholder, setPlaceholder]=useState(\"What to search?\")\r\n\r\n    const handleInput = (event) => {        \r\n           setText(event.target.value)        \r\n     }\r\n    \r\nconst onSubmit=(event) => {\r\n                event.preventDefault();\r\n                if (text.trim() !== \"\") { \r\n                handleSubmit(text.trim());\r\n                    setPlaceholder(text);\r\n                    setText(\"\")\r\n                } else {\r\n                    setPlaceholder(\"What to search?\")\r\n                }\r\n            }\r\n\r\n    return<>\r\n        <div className={style.searchCont}>\r\n            <form onSubmit={onSubmit}>\r\n                \r\n                \r\n                <input\r\n                \r\n                className={style.input}\r\n                type=\"text\"\r\n                value={text}\r\n                placeholder={placeholder}\r\n                onChange={handleInput }\r\n                />\r\n                <div className={style.iconCont}                  \r\n                    onClick={onSubmit}>                                   \r\n                    <BiSearchAlt className={style.icon}/>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </>\r\n};\r\n\r\nSearchBar.propTypes = {\r\n    searchRequest:PropTypes.func\r\n}\r\n\r\n\r\n\r\n","import style from \"./style.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport function Button({handleLoadMore}) {\r\n    return<>\r\n        <div className={style.buttonCont}>\r\n            <button\r\n                className={style.input}\r\n                type=\"button\"\r\n                onClick={handleLoadMore}\r\n                >Load more</button>\r\n        </div>\r\n        </>\r\n}\r\n\r\nButton.propTypes = {\r\n    searchRequest:PropTypes.func\r\n}","import { useState, useRef, useCallback } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport style from \"./style.module.css\";\r\nimport {SearchBar, Button, ImageGalleryItem, Modal, request } from \"./index\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\n\r\n\r\nexport function ImageGallery() {\r\n\r\n  const [dataArray, setDataArray] = useState([]);\r\n  const [status, setStatus] = useState(\"idle\");\r\n  const [showModal, setShowModal] = useState(false);\r\n  \r\n  let hight = useRef(0);\r\n  let lastRequest = useRef(\"\");\r\n  let currentPage = useRef(1);\r\n  let modalUrl = useRef(\"\");\r\n\r\n  const hightCalc=() => { hight.current = document.querySelector(\"body\").clientHeight }; \r\n\r\n  const handleSubmit=useCallback((text) => {\r\n    if (lastRequest === \"\") { return }\r\n    hightCalc()\r\n    currentPage.current=1;\r\n    lastRequest.current = text;\r\n    setStatus(\"pending\");\r\n          \r\n    request(currentPage.current, lastRequest.current)\r\n      .then((res) => {\r\n        if (res.data.hits.length < 1) {\r\n          toast.warn(\"Check your request, no data received\");\r\n          setStatus(\"idle\");\r\n        }\r\n        else {\r\n          setDataArray(res.data.hits);\r\n          setStatus(\"resolved\");\r\n        }\r\n      })\r\n      .catch(() => this.setStatus(\"reject\"));\r\n  },[]);\r\n  \r\n \r\n\r\n  const handleLoadMore=useCallback(() => {\r\n    if (lastRequest === \"\") { return }\r\n    hightCalc()\r\n    setStatus(\"pending\")\r\n     currentPage.current=currentPage.current+1      \r\n    request(currentPage.current, lastRequest.current)\r\n      .then((res) => {\r\n        if (res.data.hits.length < 1) {\r\n          toast.warn(\"These are all pictures for this request\");\r\n          setStatus(\"idle\");\r\n        } else {\r\n          setDataArray((prevState) =>\r\n            [...prevState, ...res.data.hits]\r\n          );\r\n          setStatus(\"resolved\");\r\n                    \r\n          window.scrollTo({\r\n            top: hight.current - 35,\r\n            behavior: \"smooth\"\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setStatus(\"reject\");\r\n        console.log(err)\r\n      })\r\n  },[]);\r\n\r\n  const closeModal = () => {  \r\n    setShowModal(false);\r\n    setStatus(\"resolved\");\r\n  };\r\n  \r\n  const openModalData = (e) => { \r\n    setShowModal(true);\r\n    modalUrl.current = gettingLink(e);\r\n    setStatus(\"idle\");\r\n  };\r\n  \r\n  const gettingLink = (e) => {\r\n    const modalId = e.target.id;\r\n    const obj = dataArray.find((el) => el.id.toString() === modalId)\r\n    if (obj) { return obj.largeImageURL }\r\n  };\r\n       \r\n     \r\n  return <>\r\n      \r\n    {status === \"reject\" && toast.error(\"unknown error, check connection\")}\r\n    \r\n    {status === \"pending\" && (\r\n      <div className={style.spinContainer}>\r\n        <Loader type=\"Circles\" color=\"#00BFFF\" height={120} width={120} />\r\n      </div>)\r\n    }\r\n\r\n    {showModal &&\r\n      <Modal\r\n        closeModal={closeModal}>\r\n        <img src={modalUrl.current} className={style.modalImg} alt=\"\" />\r\n      </Modal>}\r\n          \r\n    <SearchBar handleSubmit={handleSubmit} />\r\n  \r\n    < ul className={style.gallery}>\r\n      <ImageGalleryItem\r\n      dataArray={dataArray}\r\n      openModalData={openModalData}\r\n      />\r\n     </ul>\r\n       \r\n      {status === \"resolved\" &&\r\n        (<Button\r\n        handleLoadMore={handleLoadMore} />)}\r\n    \r\n        </>\r\n    }\r\n\r\n\r\n\r\n \r\n","import style from \"./style.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport  function ImageGalleryItem({ dataArray, openModalData }) {\r\n  \r\n return dataArray.map(el => \r\n    (       \r\n    <li className={style.photoCard} key={el.id} id={el.id}  >\r\n     <img\r\n       onClick={(e) => openModalData(e)}\r\n       className={style.photoImg}\r\n       src={el.webformatURL} alt=\"\"\r\n       id={el.id}\r\n     />\r\n    </li>\r\n  )\r\n  )\r\n}\r\n  \r\nImageGalleryItem.propTypes = {\r\n  dataArray: PropTypes.array.isRequired,\r\n  openModalData:PropTypes.func.isRequired\r\n}\r\n\r\n","import { useEffect, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport style from \"./style.module.css\";\r\n\r\n\r\n\r\n\r\nexport function Modal ({closeModal,children}) {\r\n\r\n    const modalRoot = useRef(document.querySelector(\"#modal-root\"));\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.code === \"Escape\") { closeModal() }\r\n    };\r\n\r\n    \r\n    useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return  () =>  window.removeEventListener('keydown', handleKeyDown) \r\n    });\r\n\r\n\r\n    const handleBackdropClick = (ev) => {\r\n        if (ev.target === ev.currentTarget) {\r\n            closeModal()\r\n        }\r\n    };\r\n    \r\n    \r\n    return createPortal(\r\n        <div\r\n            className={style.overlay}\r\n            onClick={handleBackdropClick}\r\n        >\r\n            <div className={style.modalContainer}>\r\n                {children}\r\n            </div>\r\n            <button type=\"button\" onClick={closeModal} className={style.closeButton}>Close</button>\r\n        </div>,\r\n        modalRoot.current\r\n    );\r\n}\r\n\r\n\r\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '23012527-abace86bcdc7661bfd5472938';\n\nexport function request(page, searchRequest) {\n  const url = `${BASE_URL}?key=${KEY}&per_page=12&page=${page}&q=${searchRequest}`;\n  return axios.get(url);\n}\n","import { ImageGallery } from './components/index';\nimport './App.css';\nimport { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\n\nclass App extends Component {\n  state = {};\n\n  render() {\n    return (\n      <>\n        <ImageGallery />\n        <ToastContainer />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}